
===== /Users/alessandrocarli/CasAlta/casalta/static/styles.css  =====
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.scenarios {
    display: flex;
    justify-content: space-between;
}

.scenario {
    flex: 1;
    margin: 10px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: #f9f9f9;
}

.scenario h3 {
    text-align: center;
}

label {
    display: block;
    margin: 10px 0 5px;
}

input[type="number"] {
    width: 100%;
    padding: 5px;
    margin-bottom: 10px;
}

button {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #45a049;
}

.section {
    margin-top: 20px;
}

#amortization-chart {
    max-width: 100%;
}
===== /Users/alessandrocarli/CasAlta/casalta/static/script.js  =====
document.getElementById('mortgage-form').addEventListener('submit', function (e) {
    e.preventDefault();

    const scenarios = [];
    for (let i = 1; i <= 4; i++) {
        const price = parseFloat(document.getElementById(`price${i}`).value);
        const downPaymentPercent = parseFloat(document.getElementById(`down-payment-percent${i}`).value);
        const downPayment = (downPaymentPercent / 100) * price;
        const interestRate = parseFloat(document.getElementById(`interest-rate${i}`).value);
        const years = parseInt(document.getElementById(`years${i}`).value);
        const lawyerFees = parseFloat(document.getElementById(`lawyer-fees${i}`).value);
        const titleInsurance = parseFloat(document.getElementById(`title-insurance${i}`).value);
        const homeInspection = parseFloat(document.getElementById(`home-inspection${i}`).value);
        const appraisalFees = parseFloat(document.getElementById(`appraisal-fees${i}`).value);
        const otherExpenses = parseFloat(document.getElementById(`other-expenses${i}`).value);

        scenarios.push({
            price,
            down_payment: downPayment,
            interest_rate: interestRate,
            years,
            lawyer_fees: lawyerFees,
            title_insurance: titleInsurance,
            home_inspection: homeInspection,
            appraisal_fees: appraisalFees,
            other_expenses: otherExpenses
        });

        document.getElementById(`down-payment${i}`).value = downPayment.toFixed(2);
    }

    fetch('/calculate', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ scenarios })
    })
    .then(response => response.json())
    .then(data => {
        let resultHTML = '';
        let cashNeededHTML = '';
        let labels = data[0].amortization_schedule.map(schedule => schedule.month);
        let datasets = [];

        data.forEach((scenario, index) => {
            resultHTML += `<p>Scenario ${index + 1} Monthly Payment: ${scenario.mortgage_payment.toFixed(2)}</p>`;
            cashNeededHTML += `<p>Scenario ${index + 1} Cash Needed to Close: ${scenario.cash_needed_to_close.toFixed(2)}</p>`;
            datasets.push({
                label: `Scenario ${index + 1} Principal`,
                data: scenario.amortization_schedule.map(schedule => schedule.principal_payment),
                backgroundColor: `rgba(${index * 50}, ${index * 50 + 100}, 192, 0.2)`,
                borderColor: `rgba(${index * 50}, ${index * 50 + 100}, 192, 1)`,
                borderWidth: 1
            });
            datasets.push({
                label: `Scenario ${index + 1} Interest`,
                data: scenario.amortization_schedule.map(schedule => schedule.interest_payment),
                backgroundColor: `rgba(${index * 50 + 100}, 99, 132, 0.2)`,
                borderColor: `rgba(${index * 50 + 100}, 99, 132, 1)`,
                borderWidth: 1
            });
        });

        document.getElementById('mortgage-result').innerHTML = resultHTML;
        document.getElementById('cash-needed-result').innerHTML = cashNeededHTML;

        const ctx = document.getElementById('amortization-chart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: datasets
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
});

for (let i = 1; i <= 4; i++) {
    document.getElementById(`down-payment-percent${i}`).addEventListener('input', function () {
        const price = parseFloat(document.getElementById(`price${i}`).value);
        const percent = parseFloat(document.getElementById(`down-payment-percent${i}`).value);
        const downPayment = (percent / 100) * price;
        document.getElementById(`down-payment${i}`).value = downPayment.toFixed(2);
    });

    document.getElementById(`down-payment${i}`).addEventListener('input', function () {
        const price = parseFloat(document.getElementById(`price${i}`).value);
        const downPayment = parseFloat(document.getElementById(`down-payment${i}`).value);
        const percent = (downPayment / price) * 100;
        document.getElementById(`down-payment-percent${i}`).value = percent.toFixed(2);
    });
}

===== /Users/alessandrocarli/CasAlta/casalta/app.py  =====
from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/calculate', methods=['POST'])
def calculate():
    data = request.get_json()
    scenarios = data['scenarios']
    results = []

    for scenario in scenarios:
        price = scenario['price']
        down_payment = scenario['down_payment']
        interest_rate = scenario['interest_rate'] / 100
        years = scenario['years']
        lawyer_fees = scenario['lawyer_fees']
        title_insurance = scenario['title_insurance']
        home_inspection = scenario['home_inspection']
        appraisal_fees = scenario['appraisal_fees']
        other_expenses = scenario['other_expenses']

        principal = price - down_payment
        monthly_interest_rate = interest_rate / 12
        number_of_payments = years * 12
        mortgage_payment = (principal * monthly_interest_rate * (1 + monthly_interest_rate) ** number_of_payments) / ((1 + monthly_interest_rate) ** number_of_payments - 1)

        total_closing_costs = down_payment + lawyer_fees + title_insurance + home_inspection + appraisal_fees + other_expenses

        amortization_schedule = []
        remaining_balance = principal

        for month in range(1, number_of_payments + 1):
            interest_payment = remaining_balance * monthly_interest_rate
            principal_payment = mortgage_payment - interest_payment
            remaining_balance -= principal_payment
            amortization_schedule.append({
                'month': month,
                'principal_payment': principal_payment,
                'interest_payment': interest_payment,
                'remaining_balance': remaining_balance
            })

        results.append({
            'mortgage_payment': mortgage_payment,
            'cash_needed_to_close': total_closing_costs,
            'amortization_schedule': amortization_schedule
        })

    return jsonify(results)

if __name__ == '__main__':
    app.run(debug=True)

===== /Users/alessandrocarli/CasAlta/casalta/templates/index.html  =====
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>Mortgage Calculator</h1>
        <form id="mortgage-form">
            <div class="scenarios">
                <div class="scenario" id="scenario1">
                    <h3>Scenario 1</h3>
                    <label for="price1">Price:</label>
                    <input type="number" id="price1" name="price1" value="500000" required>
                    <label for="down-payment1">$ Down Payment:</label>
                    <input type="number" id="down-payment1" name="down_payment1" value="100000" required>
                    <label for="down-payment-percent1">% Down Payment:</label>
                    <input type="number" id="down-payment-percent1" name="down_payment_percent1" value="20" required>
                    <label for="interest-rate1">Interest Rate (%):</label>
                    <input type="number" step="0.01" id="interest-rate1" name="interest_rate1" value="3.5" required>
                    <label for="years1">Years:</label>
                    <input type="number" id="years1" name="years1" value="30" required>
                    <label for="lawyer-fees1">Lawyer Fees:</label>
                    <input type="number" id="lawyer-fees1" name="lawyer_fees1" value="2000" required>
                    <label for="title-insurance1">Title Insurance:</label>
                    <input type="number" id="title-insurance1" name="title_insurance1" value="500" required>
                    <label for="home-inspection1">Home Inspection:</label>
                    <input type="number" id="home-inspection1" name="home_inspection1" value="400" required>
                    <label for="appraisal-fees1">Appraisal Fees:</label>
                    <input type="number" id="appraisal-fees1" name="appraisal_fees1" value="300" required>
                    <label for="other-expenses1">Other Expenses:</label>
                    <select id="other-expenses1" name="other_expenses1">
                        <option value="0">None</option>
                        <option value="1000">Option 1: $1000</option>
                        <option value="2000">Option 2: $2000</option>
                        <option value健一: $3000</option>
                    </select>
                </div>
                
                <div class="scenario" id="scenario2">
                    <h3>Scenario 2</h3>
                    <label for="price2">Price:</label>
                    <input type="number" id="price2" name="price2" value="600000" required>
                    <label for="down-payment2">$ Down Payment:</label>
                    <input type="number" id="down-payment2" name="down_payment2" value="150000" required>
                    <label for="down-payment-percent2">% Down Payment:</label>
                    <input type="number" id="down-payment-percent2" name="down_payment_percent2" value="25" required>
                    <label for="interest-rate2">Interest Rate (%):</label>
                    <input type="number" step="0.01" id="interest-rate2" name="interest_rate2" value="3.75" required>
                    <label for="years2">Years:</label>
                    <input type="number" id="years2" name="years2" value="25" required>
                    <label for="lawyer-fees2">Lawyer Fees:</label>
                    <input type="number" id="lawyer-fees2" name="lawyer_fees2" value="2500" required>
                    <label for="title-insurance2">Title Insurance:</label>
                    <input type="number" id="title-insurance2" name="title_insurance2" value="600" required>
                    <label for="home-inspection2">Home Inspection:</label>
                    <input type="number" id="home-inspection2" name="home_inspection2" value="500" required>
                    <label for="appraisal-fees2">Appraisal Fees:</label>
                    <input type="number" id="appraisal-fees2" name="appraisal_fees2" value="350" required>
                    <label for="other-expenses2">Other Expenses:</label>
                    <select id="other-expenses2" name="other_expenses2">
                        <option value="0">None</option>
                        <option value="1500">Option 1: $1500</option>
                        <option value="2500">Option 2: $2500</option>
                        <option value="3500">Option 3: $3500</option>
                    </select>
                </div>
                
                <div class="scenario" id="scenario3">
                    <h3>Scenario 3</hMultiplier>
                    <label for="price3">Price:</label>
                    <input type="number" id="price3" name="price3" value="700000" required>
                    <label for="down-payment3">$ Down Payment:</label>
                    <input type="number" id="down-payment3" name="down_payment3" value="200000" required>
                    <label for="down-payment-percent3">% Down Payment:</label>
                    <input type="number" id="down-payment-percent3" name="down_payment_percent3" value="28" required>
                    <label for="interest-rate3">Interest Rate (%):</label>
                    <input type="number" step="0.01" id="interest-rate3" name="interest_rate3" value="4" required>
                    <label for="years3">Years:</label>
                    <input type="number" id="years3" name="years3" value="30" required>
                    <label for="lawyer-fees3">Lawyer Fees:</label>
                    <input type="number" id="lawyer-fees3" name="lawyer_fees3" value="3000" required>
                    <label for="title-insurance3">Title Insurance:</label>
                    <input type="number" id="title-insurance3" name="title_insurance3" value="700" required>
                    <label for="home-inspection3">Home Inspection:</label>
                    <input type="number" id="home-inspection3" name="home_inspection3" value="600" required>
                    <label for="appraisal-fees3">Appraisal Fees:</label>
                    <input type="number" id="appraisal-fees3" name="appraisal_fees3" value="400" required>
                    <label for="other-expenses3">Other Expenses:</label>
                    <select id="other-expenses3" name="other_expenses3">
                        <option value="0">None</option>
                        <option value="2000">Option 1: $2000</option>
                        <option value="3000">Option 2: $3000</option>
                        <option value="4000">Option 3: $4000</option>
                    </select>
                </div>
                
                <div class="scenario" id="scenario4">
                    <h3>Scenario 4</h3>
                    <label for="price4">Price:</label>
                    <input type="number" id="price4" name="price4" value="800000" required>
                    <label for="down-payment4">$ Down Payment:</label>
                    <input type="number" id="down-payment4" name="down_payment4" value="250000" required>
                    <label for="down-payment-percent4">% Down Payment:</label>
                    <input type="number" id="down-payment-percent4" name="down_payment_percent4" value="30" required>
                    <label for="interest-rate4">Interest Rate (%):</label>
                    <input type="number" step="0.01" id="interest-rate4" name="interest_rate4" value="4.25" required>
                    <label for="years4">Years:</label>
                    <input type="number" id="years4" name="years4" value="20" required>
                    <label for="lawyer-fees4">Lawyer Fees:</label>
                    <input type="number" id="lawyer-fees4" name="lawyer_fees4" value="3500" required>
                    <label for="title-insurance4">Title Insurance:</label>
                    <input type="number" id="title-insurance4" name="title_insurance4" value="800" required>
                    <label for="home-inspection4">Home Inspection:</label>
                    <input type="number" id="home-inspection4" name="home_inspection4" value="700" required>
                    <label for="appraisal-fees4">Appraisal Fees:</label>
                    <input type="number" id="appraisal-fees4" name="appraisal_fees4" value="450" required>
                    <label for="other-expenses4">Other Expenses:</label>
                    <select id="other-expenses4" name="other_expenses4">
                        <option value="0">None</option>
                        <option value="2500">Option 1: $2500</option>
                        <option value="3500">Option 2: $3500</option>
                        <option value="4500">Option 3: $4500</option>
                    </select>
                </div>
                
            </div>
            <button type="submit">Calculate</button>
        </form>
        <div id="mortgage-result"></div>
        <div class="section" id="cash-needed-section">
            <h2>Cash Needed to Close</h2>
            <div id="cash-needed-result"></div>
        </div>
        <div class="section" id="monthly-expenses-section">
            <h2>Monthly Expenses</h2>
            <div id="monthly-expenses-result"></div>
        </div>
        <div class="section" id="amortization-schedule-section">
            <h2>Amortization Schedule</h2>
            <canvas id="amortization-chart"></canvas>
        </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>

